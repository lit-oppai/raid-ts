import{d as S,r as C,s as R,o as e,c as n,F as v,m as g,B as z,h as l,t as d,f as u,u as t,z as i,A as f,j as E,C as B}from"./index-Dv97TFdI.js";import{d as A,e as F,c as h,n as H,f as N,b as k,r as p,g as $,h as I}from"./controlView-tbByPEUt.js";const T={class:""},V={class:"mt-6 mb-2"},M={class:"text-neutral-400 text-sm font-normal font-['Roboto']"},P={class:"w-full bg-white rounded-lg px-4 py-3"},G={class:"w-full flex items-center gap-3"},j={class:"flex flex-col gap-1"},L={class:"text-zinc-800 text-base font-medium font-['Roboto']"},U={key:0,class:"text-neutral-400 text-xs font-normal font-['Roboto']"},q={key:1,class:"text-neutral-400 text-xs font-normal font-['Roboto']"},J=l("div",{class:"flex-grow"},null,-1),K={key:0,class:"ml-9 mt-4 bg-gray-50 rounded-lg p-3 gap-2 flex flex-col"},O={class:"text-zinc-800 text-xs font-medium font-['Roboto'] px-2"},Q={key:0,class:"text-right text-neutral-400 text-xs font-normal font-['Roboto']"},W={key:1,class:"text-right text-neutral-400 text-xs font-normal font-['Roboto']"},X={key:2,class:"text-right text-neutral-400 text-xs font-normal font-['Roboto']"},Y=l("span",{class:"flex-grow"},null,-1),es=S({__name:"DiscoverNewHardDrive",setup(Z){const x=C(new Map),_=()=>{z.getDisks("show").then(r=>{r.status===200&&r.data.data&&(x.value=new Map(r.data.data.filter(o=>o.model!=="System").map(o=>[["0","1","2","3","4","5","6","A","B","C","D"][(o==null?void 0:o.index)??0],o])))})};R(()=>{_()});const b=(r="",o="")=>{H.value=r,N.value=o,k("CreateStorage")},y=(r,o)=>{k("EnableStorage"),B.createStorage({path:o,name:r,format:!1}).then(c=>{c.status===200?(p.success=!0,p.btnText="Done"):(p.success=!1,p.btnText="Restart")}).catch(c=>{console.error(c),p.success=!1,p.btnText="Restart"}).finally(()=>{p.butFunc=()=>{_(),$()},I("next")})};return(r,o)=>(e(),n("div",T,[(e(!0),n(v,null,g(x.value,([c,a])=>(e(),n("div",{key:c},[l("div",V,[l("span",M," Hard drive bay "+d(c),1)]),l("div",P,[l("div",G,[a.type==="HDD"?(e(),u(t(i),{key:0,src:t(A),class:"h-6 w-6"},null,8,["src"])):(e(),u(t(i),{key:1,src:t(F),class:"h-6 w-6"},null,8,["src"])),l("div",j,[l("span",L,d(a.model),1),a.support?(e(),n("span",U," Enable directly while preserving data. ")):(e(),n("span",q," Please check and back up the data before formatting. "))]),J,a.support?(e(),u(t(f),{key:2,label:"Enable",severity:"primary",size:"medium",onClick:s=>y(a.name,a.path)},null,8,["onClick"])):(e(),u(t(f),{key:3,label:"Format and Enable",severity:"primary",size:"medium",onClick:s=>b(a.name,a.path)},null,8,["onClick"]))]),(a==null?void 0:a.children_number)??0>0?(e(),n("div",K,[(e(!0),n(v,null,g(a.children,(s,w)=>(e(),n("div",{class:"rounded-md border border-gray-200 px-1.5 flex items-center h-9",key:w},[l("span",O,d(s==null?void 0:s.name),1),s!=null&&s.mount_point?(e(),n("span",Q,d(a.type)+" · "+d(t(h)(s==null?void 0:s.size)),1)):s!=null&&s.supported?(e(),n("span",W," Preserving data · "+d(t(h)(s==null?void 0:s.size)),1)):(e(),n("span",X," Needs to be formatted · "+d(t(h)((s==null?void 0:s.size)??0)),1)),Y,s!=null&&s.mount_point?(e(),u(t(f),{key:3,label:"Used",severity:"secondary",size:"small",disabled:""})):s!=null&&s.supported?(e(),u(t(f),{key:4,label:"Enable",severity:"secondary",size:"small",onClick:D=>y(s==null?void 0:s.name,s==null?void 0:s.path)},null,8,["onClick"])):(e(),u(t(f),{key:5,label:"Format and Enable",severity:"secondary",size:"small",onClick:D=>b(s==null?void 0:s.name,s==null?void 0:s.path)},null,8,["onClick"]))]))),128))])):E("",!0)])]))),128))]))}});export{es as default};
